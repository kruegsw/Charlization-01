<!DOCTYPE html>
<html>
  <body>
    <canvas id="gameCanvas" width="400" height="400"></canvas>
    <script>
      var canvas = document.getElementById('gameCanvas');
      var context = canvas.getContext('2d');

      // Connect to the WebSocket server
      var ws = new WebSocket('ws://69.48.163.56:1234');

      // Store previous positions
      var trail = [];

      // When a message is received from the server
      ws.onmessage = function(event) {
        console.log(event);
        // Parse the position from the message
        var position = JSON.parse(event.data);

        // Add the position to the trail array
        trail.push(position);

        // Limit the trail length to a certain number of points (e.g., 50)
        if (trail.length > 50) {
          trail.shift(); // Remove the oldest position
        }

        // Clear the canvas
        context.clearRect(0, 0, canvas.width, canvas.height);

        // Draw the continuous path
        context.beginPath();
        context.moveTo(trail[0].x, trail[0].y); // Move to the first position

        for (var i = 1; i < trail.length; i++) {
          // Calculate the alpha value based on position index
          var alpha = i / trail.length;
          // Set the stroke color with adjusted alpha
          context.strokeStyle = 'rgba(0, 0, 0, ' + alpha + ')';
          
          // Connect the positions with lines
          context.lineTo(trail[i].x, trail[i].y);
        }

        // Set the line width and draw the path
        context.lineWidth = 3;
        context.stroke();
      };

      // When the mouse is moved over the canvas
      canvas.onmousemove = function(event) {
        // Send the mouse position to the server
        ws.send(JSON.stringify({ x: event.clientX, y: event.clientY }));
      };
    </script>
  </body>
</html>
